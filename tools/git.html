<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git 操作 | Actual_Chao</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.491af009.css" as="style"><link rel="preload" href="/assets/js/app.9d8f3547.js" as="script"><link rel="preload" href="/assets/js/4.13bd7c28.js" as="script"><link rel="preload" href="/assets/js/2.e137e48c.js" as="script"><link rel="preload" href="/assets/js/3.ab6c8af4.js" as="script"><link rel="prefetch" href="/assets/js/10.c025b323.js"><link rel="prefetch" href="/assets/js/11.aff30d24.js"><link rel="prefetch" href="/assets/js/12.8bb88809.js"><link rel="prefetch" href="/assets/js/13.79dbcd28.js"><link rel="prefetch" href="/assets/js/14.e167532a.js"><link rel="prefetch" href="/assets/js/15.f702e40f.js"><link rel="prefetch" href="/assets/js/16.35cb3a9e.js"><link rel="prefetch" href="/assets/js/17.f05d26a8.js"><link rel="prefetch" href="/assets/js/18.9df8e545.js"><link rel="prefetch" href="/assets/js/19.b2792608.js"><link rel="prefetch" href="/assets/js/20.c4c25256.js"><link rel="prefetch" href="/assets/js/21.1f74d6b6.js"><link rel="prefetch" href="/assets/js/22.7b0b9da6.js"><link rel="prefetch" href="/assets/js/23.1d82e3d6.js"><link rel="prefetch" href="/assets/js/24.d98f95ae.js"><link rel="prefetch" href="/assets/js/25.dbab62b8.js"><link rel="prefetch" href="/assets/js/26.c8dbe9ca.js"><link rel="prefetch" href="/assets/js/27.f2a9b031.js"><link rel="prefetch" href="/assets/js/28.ce06e913.js"><link rel="prefetch" href="/assets/js/29.afef0a84.js"><link rel="prefetch" href="/assets/js/30.03cb84de.js"><link rel="prefetch" href="/assets/js/31.26208ec5.js"><link rel="prefetch" href="/assets/js/32.4a882a30.js"><link rel="prefetch" href="/assets/js/33.63acdde4.js"><link rel="prefetch" href="/assets/js/34.b09e067b.js"><link rel="prefetch" href="/assets/js/35.d62092ad.js"><link rel="prefetch" href="/assets/js/36.1e071235.js"><link rel="prefetch" href="/assets/js/37.81a80712.js"><link rel="prefetch" href="/assets/js/38.d066480a.js"><link rel="prefetch" href="/assets/js/39.b0316480.js"><link rel="prefetch" href="/assets/js/40.913fed9b.js"><link rel="prefetch" href="/assets/js/41.3029db88.js"><link rel="prefetch" href="/assets/js/42.f8b5c583.js"><link rel="prefetch" href="/assets/js/43.abbd37b9.js"><link rel="prefetch" href="/assets/js/44.6d4a8651.js"><link rel="prefetch" href="/assets/js/5.afb84be4.js"><link rel="prefetch" href="/assets/js/6.4fa78674.js"><link rel="prefetch" href="/assets/js/7.c0e220fc.js"><link rel="prefetch" href="/assets/js/8.076ce93b.js"><link rel="prefetch" href="/assets/js/9.e1755c3d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.491af009.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="Actual_Chao" class="logo"> <span class="site-name can-hide">Actual_Chao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/recent/" class="nav-link">
  近期文章
</a></div><div class="nav-item"><a href="/package/" class="nav-link">
  我的开源
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fontend/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link router-link-active">
  工具
</a></div><div class="nav-item"><a href="/rsa/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  VUE
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="可视化" class="dropdown-title"><span class="title">可视化</span> <span class="arrow down"></span></button> <button type="button" aria-label="可视化" class="mobile-dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webgl/three/" class="nav-link">
  three
</a></li></ul></div></div><div class="nav-item"><a href="/map/" class="nav-link">
  地图
</a></div><div class="nav-item"><a href="https://github.com/actualchao/docs-vuepress-actualchao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/recent/" class="nav-link">
  近期文章
</a></div><div class="nav-item"><a href="/package/" class="nav-link">
  我的开源
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fontend/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link router-link-active">
  工具
</a></div><div class="nav-item"><a href="/rsa/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  VUE
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="可视化" class="dropdown-title"><span class="title">可视化</span> <span class="arrow down"></span></button> <button type="button" aria-label="可视化" class="mobile-dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webgl/three/" class="nav-link">
  three
</a></li></ul></div></div><div class="nav-item"><a href="/map/" class="nav-link">
  地图
</a></div><div class="nav-item"><a href="https://github.com/actualchao/docs-vuepress-actualchao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Tools</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/tools/babel.html" class="sidebar-link">babel7 介绍和配置</a></li><li><a href="/tools/devOps.html" class="sidebar-link">DevOps</a></li><li><a href="/tools/docker.html" class="sidebar-link">Docker 容器化镜像实例</a></li><li><a href="/tools/git.html" aria-current="page" class="active sidebar-link">Git 操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#一、git配置" class="sidebar-link">一、Git配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#_1-1-查看配置" class="sidebar-link">1.1 查看配置</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_1-2-设置用户名与邮箱" class="sidebar-link">1.2 设置用户名与邮箱</a></li></ul></li><li class="sidebar-sub-header"><a href="/tools/git.html#二、获得git仓库" class="sidebar-link">二、获得GIT仓库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#_2-1-创建本地仓库" class="sidebar-link">2.1 创建本地仓库</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_2-2-克隆远程仓库" class="sidebar-link">2.2 克隆远程仓库</a></li></ul></li><li class="sidebar-sub-header"><a href="/tools/git.html#三、git文件操作" class="sidebar-link">三、GIT文件操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#_3-1-查看文件状态" class="sidebar-link">3.1 查看文件状态</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-2-将未跟踪的文件添加到暂存区" class="sidebar-link">3.2 将未跟踪的文件添加到暂存区</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-3-提交" class="sidebar-link">3.3 提交</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-3-1-提交暂存" class="sidebar-link" style="padding-left:3rem;">3.3.1 提交暂存</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-3-2-修订提交" class="sidebar-link" style="padding-left:3rem;">3.3.2 修订提交</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-3-3-撤销提交" class="sidebar-link" style="padding-left:3rem;">3.3.3 撤销提交</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-4-日志与历史" class="sidebar-link">3.4 日志与历史</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-5-撤销修改" class="sidebar-link">3.5 撤销修改</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-6-删除文件" class="sidebar-link">3.6 删除文件</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-6-1-删除未跟踪文件" class="sidebar-link" style="padding-left:3rem;">3.6.1 删除未跟踪文件</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-6-2-删除暂存文件" class="sidebar-link" style="padding-left:3rem;">3.6.2 删除暂存文件</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-7-查看文件修改后的差异" class="sidebar-link">3.7 查看文件修改后的差异</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-8-签出" class="sidebar-link">3.8 签出</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-9-忽略文件" class="sidebar-link">3.9 忽略文件</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-10-临时保存" class="sidebar-link">3.10 临时保存</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_3-11-合并提交点" class="sidebar-link">3.11 合并提交点</a></li></ul></li><li class="sidebar-sub-header"><a href="/tools/git.html#四、git分支" class="sidebar-link">四、GIT分支</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#_4-1-新建分支" class="sidebar-link">4.1 新建分支</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_4-2-查看分支" class="sidebar-link">4.2 查看分支</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_4-3-切换分支" class="sidebar-link">4.3 切换分支</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_4-4-合并分支" class="sidebar-link">4.4 合并分支</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_4-5-删除分支" class="sidebar-link">4.5 删除分支</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_4-6-建立追踪关系" class="sidebar-link">4.6 建立追踪关系</a></li></ul></li><li class="sidebar-sub-header"><a href="/tools/git.html#五、远程仓库" class="sidebar-link">五、远程仓库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#_5-1-远程仓库url类型" class="sidebar-link">5.1 远程仓库url类型</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_5-2-常用操作指令" class="sidebar-link">5.2 常用操作指令</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_5-2-1-git-remote" class="sidebar-link" style="padding-left:3rem;">5.2.1 git remote</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_5-2-2-git-fetch" class="sidebar-link" style="padding-left:3rem;">5.2.2 git fetch</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_5-2-3-git-pull" class="sidebar-link" style="padding-left:3rem;">5.2.3 git pull</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_5-2-4-git-push" class="sidebar-link" style="padding-left:3rem;">5.2.4 git push</a></li></ul></li><li class="sidebar-sub-header"><a href="/tools/git.html#六、标签-tag" class="sidebar-link">六、标签 tag</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/git.html#_6-1-新建标签" class="sidebar-link" style="padding-left:3rem;">6.1 新建标签</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_6-2-查看标签" class="sidebar-link" style="padding-left:3rem;">6.2 查看标签</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_6-3-删除tag" class="sidebar-link" style="padding-left:3rem;">6.3 删除tag</a></li><li class="sidebar-sub-header"><a href="/tools/git.html#_6-4-远程tag" class="sidebar-link" style="padding-left:3rem;">6.4 远程tag</a></li></ul></li></ul></li><li><a href="/tools/iterm.html" class="sidebar-link">iterm 终端工具</a></li><li><a href="/tools/nginx.html" class="sidebar-link">nginx 配置</a></li><li><a href="/tools/rollup.html" class="sidebar-link">rollup 轻量化Library打包工具</a></li><li><a href="/tools/shell.html" class="sidebar-link">Shell</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">本文引用参考文档地址</p> <ul><li><a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer">runoob shell 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <h1 id="git"><a href="#git" class="header-anchor">#</a> GIT</h1> <p>本手册主要以操作命令的说明为主，力求包含大部分常用命令，适合初级使用者阅读。由于GIT本身命令繁多、过于灵活的原因，很多使用者对一些命令容易混肴，所以本文在讲解命令时，加入一些底层原理的说明，以使读者能清晰概念、熟练使用。</p> <h2 id="一、git配置"><a href="#一、git配置" class="header-anchor">#</a> 一、Git配置</h2> <h3 id="_1-1-查看配置"><a href="#_1-1-查看配置" class="header-anchor">#</a> 1.1 查看配置</h3> <ol><li>查看现在的git环境详细配置</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> config -l 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>查看不同级别的配置文件</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#查看系统config</span>
<span class="token function">git</span> config --system --list
　　
<span class="token comment">#查看当前用户（global）配置</span>
<span class="token function">git</span> config --global  --list
 
<span class="token comment">#查看当前仓库配置信息</span>
<span class="token function">git</span> config --local  --list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li><p>配置文件位置</p> <ul><li><p><code>--system</code> 系统级：(windows) &lt;GIT安装目录&gt;<code>\Git\mingw64\etc\gitconfig</code>，<code>（linux) /etc/gitconfig</code></p></li> <li><p><code>--global</code> 用户级：(windows) &lt;用户目录&gt;\<code>.gitconfig</code>，（<code>linux）~/.gitconfig</code></p></li> <li><p><code>--local</code> 仓库级：&lt;项目目录&gt;\.<code>git\config</code></p></li></ul></li></ol> <p>注意：对于同一配置项，三个配置文件的优先级是<code>system &lt; global &lt; local</code></p> <h3 id="_1-2-设置用户名与邮箱"><a href="#_1-2-设置用户名与邮箱" class="header-anchor">#</a> 1.2 设置用户名与邮箱</h3> <blockquote><p>设置用户名称和 <code>e-mail</code> 地址是第一步，每次 <code>Git</code> 提交都会使用该信息，它被永远的嵌入到了提交中。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> config --global user.name <span class="token string">&quot;XXX&quot;</span>  <span class="token comment">#名称</span>
<span class="token function">git</span> config --global user.email XXX@XXX.com   <span class="token comment">#邮箱</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意：<code>--global</code>为全局配置，不加为某个项目的特定配置。</p> <h2 id="二、获得git仓库"><a href="#二、获得git仓库" class="header-anchor">#</a> 二、获得GIT仓库</h2> <h3 id="_2-1-创建本地仓库"><a href="#_2-1-创建本地仓库" class="header-anchor">#</a> 2.1 创建本地仓库</h3> <blockquote><p>创建全新仓库，在项目的根目录执行指令，会在项目目录产生<code>.git</code>目录</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在当前目录新建一个Git代码库</span>
<span class="token function">git</span> init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>创建和使用本地库完整示例</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#1、创建目录</span>
<span class="token function">mkdir</span> project7

<span class="token comment">#2、进入目录</span>
<span class="token builtin class-name">cd</span> project7

<span class="token comment">#3、初始化目录为git项目</span>
<span class="token function">git</span> init

<span class="token comment">#4、创建md文件追加内容# project7(一级标题)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;# project7&quot;</span> <span class="token operator">&gt;&gt;</span> README.md

<span class="token comment">#5、添加说明文件到暂存区</span>
<span class="token function">git</span> <span class="token function">add</span> README.md

<span class="token comment">#6、提交到本地仓库并写日志</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;first commit&quot;</span>

<span class="token comment">#7、添加远程主机，主机名为origin 地址为https://git.xxx.com/xxx.git</span>
<span class="token function">git</span> remote <span class="token function">add</span> origin https://git.xxx.com/xxx.git

<span class="token comment">#8、本地的master分支推送到origin主机，同时指定origin为默认主机，后面就可以不加任何参数使用git push了，-u 参数指定一个默认主机</span>
<span class="token function">git</span> push -u origin master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_2-2-克隆远程仓库"><a href="#_2-2-克隆远程仓库" class="header-anchor">#</a> 2.2 克隆远程仓库</h3> <blockquote><p>将远程服务器上的仓库完全镜像一份至本地</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 克隆一个项目和它的整个代码历史(版本信息)</span>
<span class="token function">git</span> clone <span class="token punctuation">[</span>url<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/15fd779f5c191a3f.949b0228.gif" alt=""></p> <h2 id="三、git文件操作"><a href="#三、git文件操作" class="header-anchor">#</a> 三、GIT文件操作</h2> <h3 id="_3-1-查看文件状态"><a href="#_3-1-查看文件状态" class="header-anchor">#</a> 3.1 查看文件状态</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#查看指定文件状态</span>
<span class="token function">git</span> status <span class="token punctuation">[</span>filename<span class="token punctuation">]</span>

<span class="token comment">#查看所有文件状态</span>
<span class="token function">git</span> status
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-2-将未跟踪的文件添加到暂存区"><a href="#_3-2-将未跟踪的文件添加到暂存区" class="header-anchor">#</a> 3.2 将未跟踪的文件添加到暂存区</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 添加指定文件到暂存区</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>.

<span class="token comment"># 添加指定目录到暂存区，包括子目录</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token punctuation">[</span>dir<span class="token punctuation">]</span>

<span class="token comment"># 添加当前目录的所有文件到暂存区</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-3-提交"><a href="#_3-3-提交" class="header-anchor">#</a> 3.3 提交</h3> <hr> <h4 id="_3-3-1-提交暂存"><a href="#_3-3-1-提交暂存" class="header-anchor">#</a> 3.3.1 提交暂存</h4> <blockquote><p>通过add只是将文件或目录添加到了暂存区，使用commit可以实现将暂存区的文件提交到本地仓库。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 提交暂存区到仓库区</span>
<span class="token function">git</span> commit -m <span class="token punctuation">[</span>message<span class="token punctuation">]</span>

<span class="token comment"># 提交暂存区的指定文件到仓库区</span>
<span class="token function">git</span> commit <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>. -m <span class="token punctuation">[</span>message<span class="token punctuation">]</span>

<span class="token comment"># 提交工作区自上次commit之后的变化，直接到仓库区，跳过了add,对新文件无效</span>
<span class="token function">git</span> commit -a

<span class="token comment"># 提交时显示所有diff信息</span>
<span class="token function">git</span> commit -v

<span class="token comment"># 使用一次新的commit，替代上一次提交</span>
<span class="token comment"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span>
<span class="token function">git</span> commit --amend -m <span class="token punctuation">[</span>message<span class="token punctuation">]</span>

<span class="token comment"># 重做上一次commit，并包括指定文件的新变化</span>
<span class="token function">git</span> commit --amend <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/15fd779f983c81e7.0dfc230e.gif" alt=""></p> <h4 id="_3-3-2-修订提交"><a href="#_3-3-2-修订提交" class="header-anchor">#</a> 3.3.2 修订提交</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#修订提交</span>
<span class="token function">git</span> commit --amend
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/15fdf0187f2f4b2d.65b59718.gif" alt=""></p> <h4 id="_3-3-3-撤销提交"><a href="#_3-3-3-撤销提交" class="header-anchor">#</a> 3.3.3 撤销提交</h4> <blockquote><p>撤销提交有两种方式：使用<code>HEAD</code>指针和使用<code>commit id</code>
在<code>Git</code>中，有一个HEAD指针指向当前分支中最新的提交。当前版本，我们使用<code>HEAD^</code>，那么再钱一个版本可以使用<code>HEAD^^</code>，如果想回退到更早的提交，可以使用<code>HEAD~n</code>。（也就是，<code>HEAD^=HEAD~1</code>，<code>HEAD^^=HEAD~2</code>）</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 撤销上一次的提交,原理就是放弃工作区和暂存区的改动，同时HEAD指针指向前一个commit对象</span>
<span class="token function">git</span> reset --hard HEAD~1
<span class="token function">git</span> reset --hard HEAD^
<span class="token function">git</span> reset --hard 59cf933
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/15fe19c8a3235853.720ec312.gif" alt=""></p> <p><strong>注：</strong><code>git reset –-soft</code>和<code>git reset --hard</code>的区别在于：<code>–-soft</code>回退到某个版本，只回退了<code>commit</code>的信息，不会恢复到index file一级。如果还要提交，直接<code>commit</code>即可；<code>-–hard</code>彻底回退到某个版本，本地的源码也会变为上一个版本的内容，撤销的<code>commit</code>中所包含的更改被冲掉。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 增加一条新的 `commit`，它的内容和倒数第二个 `commit` 是相反的，从而和倒数第二个 `commit` 相互抵消，达到撤销的效果。</span>
<span class="token function">git</span> revert HEAD^
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-日志与历史"><a href="#_3-4-日志与历史" class="header-anchor">#</a> 3.4 日志与历史</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看提交日志</span>
<span class="token function">git</span> log

<span class="token comment"># 以图形化的方式显示提交历史的关系</span>
<span class="token function">git</span> log --graph

<span class="token comment"># 显示1行</span>
<span class="token function">git</span> log -1

<span class="token comment"># 一个提交一行显示</span>
<span class="token function">git</span> log --oneline

<span class="token comment"># 显示所有更新记录，包括已经撤销的更新</span>
<span class="token function">git</span> reflog

<span class="token comment"># 显示commit历史，以及每次commit发生变更的文件</span>
<span class="token function">git</span> log --stat

<span class="token comment"># 显示指定文件相关的每一次diff</span>
<span class="token function">git</span> log -p <span class="token punctuation">[</span>file<span class="token punctuation">]</span>

<span class="token comment"># 显示某次提交的元数据和内容变化</span>
<span class="token function">git</span> show <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>

<span class="token comment"># 显示某次提交发生变化的文件</span>
<span class="token function">git</span> show --name-only <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>

<span class="token comment"># 显示某次提交时，某个文件的内容</span>
<span class="token function">git</span> show <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>:<span class="token punctuation">[</span>filename<span class="token punctuation">]</span>

<span class="token comment"># 显示指定文件是什么人在什么时间修改过</span>
<span class="token function">git</span> blame <span class="token punctuation">[</span>file<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_3-5-撤销修改"><a href="#_3-5-撤销修改" class="header-anchor">#</a> 3.5 撤销修改</h3> <ol><li>取消暂存（撤销add）</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 暂存区的目录树会被重写，被当前分支指向的目录树所替换，但是工作区不受影响。</span>
<span class="token function">git</span> reset HEAD <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>撤销工作区文件修改</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 用暂存区指定的文件替换工作区的文件。</span>
<span class="token function">git</span> checkout -- <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>撤销工作区修改和暂存的内容</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 用HEAD 指向的分支中的文件替换暂存区和以及工作区中的文件</span>
<span class="token function">git</span> checkout HEAD <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-6-删除文件"><a href="#_3-6-删除文件" class="header-anchor">#</a> 3.6 删除文件</h3> <hr> <h4 id="_3-6-1-删除未跟踪文件"><a href="#_3-6-1-删除未跟踪文件" class="header-anchor">#</a> 3.6.1 删除未跟踪文件</h4> <blockquote><p>如果文件还是未跟踪状态，直接删除文件就可了，bash中使用rm可以删除文件。</p></blockquote> <h4 id="_3-6-2-删除暂存文件"><a href="#_3-6-2-删除暂存文件" class="header-anchor">#</a> 3.6.2 删除暂存文件</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 从暂存区删除文件，工作区物理文件则不做出改变</span>
<span class="token function">git</span> <span class="token function">rm</span> --cached <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>

<span class="token comment"># 不但从暂存区中删除，同时删除工作区物理文件</span>
<span class="token function">git</span> <span class="token function">rm</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-7-查看文件修改后的差异"><a href="#_3-7-查看文件修改后的差异" class="header-anchor">#</a> 3.7 查看文件修改后的差异</h3> <blockquote><p>用<code>git status</code>只能查看对哪些文件做了改动，如果要看改动了什么，可以用：</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看文件修改后的差异</span>
<span class="token function">git</span> <span class="token function">diff</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>

<span class="token comment"># 比较暂存区的文件与之前本地仓库中已经提交过的文件差异</span>
<span class="token function">git</span> <span class="token function">diff</span> --cached <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>

<span class="token comment"># 比较本地仓库中已经提交过的文件与工作空间中的文件差异</span>
<span class="token function">git</span> <span class="token function">diff</span> HEAD <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>

<span class="token comment"># 显示分支之间的差异</span>
<span class="token function">git</span> <span class="token function">diff</span> <span class="token punctuation">[</span>first-branch<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>second-branch<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-8-签出"><a href="#_3-8-签出" class="header-anchor">#</a> 3.8 签出</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 检出branch分支。更新HEAD以指向branch分支，以及用branch指向的树更新暂存区和工作区。</span>
<span class="token function">git</span> checkout branch

<span class="token comment"># 汇总显示工作区、暂存区与HEAD的差异。</span>
<span class="token function">git</span> checkout

<span class="token comment"># 同上</span>
<span class="token function">git</span> checkout HEAD

<span class="token comment"># 用暂存区中filename文件来覆盖工作区中的filename文件。相当于取消自上次执行git add filename以来（如果执行过）的本地修改。</span>
<span class="token function">git</span> checkout -- filename

<span class="token comment"># 维持HEAD的指向不变。用branch所指向的提交中filename替换暂存区和工作区中相应的文件。注意会将暂存区和工作区中的filename文件直接覆盖。</span>
<span class="token function">git</span> checkout branch -- filename

<span class="token comment"># 注意git checkout 命令后的参数为一个点（“.”）。这条命令最危险！会取消所有本地的  #修改（相对于暂存区）。相当于用暂存区的所有文件直接覆盖本地文件，不给用户任何确认的机会！</span>
<span class="token function">git</span> checkout -- <span class="token builtin class-name">.</span> 或写作 <span class="token function">git</span> checkout <span class="token builtin class-name">.</span>

<span class="token comment"># 如果不加commit_id，那么git checkout -- file_name 表示恢复文件到本地版本库中最新的状态。</span>
<span class="token function">git</span> checkout commit_id -- file_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_3-9-忽略文件"><a href="#_3-9-忽略文件" class="header-anchor">#</a> 3.9 忽略文件</h3> <blockquote><ul><li>当不想把某些文件纳入版本控制中，在主目录下建立<code>.gitignore</code>文件。</li> <li>该文件只能作用于 Untracked Files，也就是那些从来没有被 Git 记录过的文件（自添加以后，从未 add 及 commit 过的文件）。</li> <li>如果文件曾经被 Git 记录过，那么 <code>.gitignore</code> 就对它们完全无效。</li></ul></blockquote> <h3 id="_3-10-临时保存"><a href="#_3-10-临时保存" class="header-anchor">#</a> 3.10 临时保存</h3> <p>将目前还不想提交的但是已经修改的内容进行保存至堆栈中，包括工作区和暂存区中的内容，后续可以在某个分支上恢复出堆栈中的内容。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将所有未提交的修改（工作区和暂存区）保存至堆栈中，用于后续恢复当前工作目录。</span>
<span class="token function">git</span> stash

<span class="token comment"># 查看当前stash中的内容。</span>
<span class="token function">git</span> stash list

<span class="token comment"># 查看堆栈中最新保存的stash和当前目录的差异。</span>
<span class="token function">git</span> stash show

<span class="token comment"># 将当前stash中的内容弹出，并应用到当前分支对应的工作目录上。堆栈中的内容会删除。</span>
<span class="token function">git</span> stash pop

<span class="token comment"># 将堆栈中的内容应用到当前目录，不同于git stash pop，该命令不会将内容从堆栈中删除。</span>
<span class="token function">git</span> stash apply

<span class="token comment"># 从堆栈中移除某个指定的stash</span>
<span class="token function">git</span> stash drop + 名称

<span class="token comment"># 清除堆栈中的所有内容。</span>
<span class="token function">git</span> stash <span class="token function">clear</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_3-11-合并提交点"><a href="#_3-11-合并提交点" class="header-anchor">#</a> 3.11 合并提交点</h3> <p>获取某一个分支的某一次提交，并作为一个新的提交引入到当前分支上。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> cherry-pick <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>

<span class="token comment"># 中止cherry-pick</span>
<span class="token function">git</span> cherry-pick --abort
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="四、git分支"><a href="#四、git分支" class="header-anchor">#</a> 四、GIT分支</h2> <h3 id="_4-1-新建分支"><a href="#_4-1-新建分支" class="header-anchor">#</a> 4.1 新建分支</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 新建一个分支，但依然停留在当前分支</span>
<span class="token function">git</span> branch <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>

<span class="token comment"># 新建一个分支，并切换到该分支</span>
<span class="token function">git</span> checkout -b <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>

<span class="token comment"># 新建一个分支，指向指定commit</span>
<span class="token function">git</span> branch <span class="token punctuation">[</span>branch<span class="token punctuation">]</span> <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>

<span class="token comment"># 新建一个分支，与指定的远程分支建立追踪关系</span>
<span class="token function">git</span> branch --track <span class="token punctuation">[</span>branch<span class="token punctuation">]</span> <span class="token punctuation">[</span>remote-branch<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/15fe3354a1b892f7.220ea3c7.gif" alt=""></p> <h3 id="_4-2-查看分支"><a href="#_4-2-查看分支" class="header-anchor">#</a> 4.2 查看分支</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 列出所有本地分支</span>
<span class="token function">git</span> branch

<span class="token comment"># 列出所有远程分支</span>
<span class="token function">git</span> branch -r

<span class="token comment"># 列出所有本地分支和远程分支</span>
<span class="token function">git</span> branch -a

<span class="token comment"># 查看本地分支和远程分支的映射关系</span>
<span class="token function">git</span> branch -vv
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-3-切换分支"><a href="#_4-3-切换分支" class="header-anchor">#</a> 4.3 切换分支</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 切换到指定分支，并更新工作区</span>
<span class="token function">git</span> checkout <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>

<span class="token comment"># 切换到上一个分支</span>
<span class="token function">git</span> checkout -
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>原理：</strong></p> <ol><li>切换到feature1分支。</li></ol> <p><img src="/assets/img/15fe3354a130b3cd.0def042f.gif" alt=""></p> <ol start="2"><li>在feature1上提交一次。</li></ol> <p><img src="/assets/img/15fe3354a2a32692.664a9e54.gif" alt=""></p> <h3 id="_4-4-合并分支"><a href="#_4-4-合并分支" class="header-anchor">#</a> 4.4 合并分支</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 合并指定分支到当前分支</span>
<span class="token function">git</span> merge <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>

<span class="token comment"># 合并指定分支到当前分支</span>
<span class="token function">git</span> merge <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>

<span class="token comment"># 取消合并</span>
<span class="token function">git</span> merge --abort
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>合并原理：</strong></p> <p>从目标 <code>commit</code> 和当前 <code>commit</code> （即 <code>HEAD</code> 所指向的 <code>commit</code>）分叉的位置起，把目标 <code>commit</code> 的路径上的所有 <code>commit</code> 的内容一并应用到当前 <code>commit</code>，然后自动生成一个新的 <code>commit</code>。</p> <p>例如下面这个图中：</p> <p><img src="/assets/img/15fddc2a9c60eca3.18d97bcc.gif" alt=""></p> <p><code>HEAD</code> 指向了 <code>master</code>，所以如果这时执行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> merge branch1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Git 会把 <code>5</code> 和 <code>6</code> 这两个 <code>commit</code> 的内容一并应用到 <code>4</code> 上，然后生成一个新的提交，并跳转到提交信息填写的界面：</p> <p><img src="/assets/img/15fddc2aaa2dae15.f8cb9d9b.gif" alt=""></p> <p><code>merge</code> 操作会帮你自动地填写简要的提交信息。在提交信息修改完成后（或者你打算不修改默认的提交信息），就可以退出这个界面，然后这次 <code>merge</code> 就算完成了。</p> <p><img src="/assets/img/15fddc2aad5a0279.e4782d9d.gif" alt=""></p> <h3 id="_4-5-删除分支"><a href="#_4-5-删除分支" class="header-anchor">#</a> 4.5 删除分支</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 删除分支</span>
<span class="token function">git</span> branch -d <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>

<span class="token comment"># 强制删除分支</span>
<span class="token function">git</span> branch -D <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>

<span class="token comment"># 删除远程分支</span>
<span class="token function">git</span> push origin --delete <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>
<span class="token function">git</span> branch -dr <span class="token punctuation">[</span>remote/branch<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/16006b7e3d35fe54.a04d18f2.gif" alt=""></p> <h3 id="_4-6-建立追踪关系"><a href="#_4-6-建立追踪关系" class="header-anchor">#</a> 4.6 建立追踪关系</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 建立追踪关系，在现有分支与指定的远程分支之间</span>
<span class="token function">git</span> branch --set-upstream <span class="token punctuation">[</span>branch<span class="token punctuation">]</span> <span class="token punctuation">[</span>remote-branch<span class="token punctuation">]</span>

<span class="token function">git</span> push --set-upstream <span class="token punctuation">[</span>origin<span class="token punctuation">]</span> <span class="token punctuation">[</span>remote-branch<span class="token punctuation">]</span>
<span class="token function">git</span> push -u <span class="token punctuation">[</span>origin<span class="token punctuation">]</span> <span class="token punctuation">[</span>remote-branch<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="五、远程仓库"><a href="#五、远程仓库" class="header-anchor">#</a> 五、远程仓库</h2> <h3 id="_5-1-远程仓库url类型"><a href="#_5-1-远程仓库url类型" class="header-anchor">#</a> 5.1 远程仓库url类型</h3> <hr> <ul><li><strong>https 类型</strong></li></ul> <p><code>https://xxx.com/xxx/xxxx.git</code></p> <p>使用加密的网页访问通道读写仓库，使用用户名及密码进行鉴权。</p> <ul><li><strong>SSH类型</strong></li></ul> <p><code>git@xxx.com/xxx/xxxx.git</code></p> <p>使用加密通道读写仓库，无单次上传限制，需先设置 “账户 SSH 公钥”，完成配对验证。</p> <ul><li><strong>Git配置SSH key</strong></li></ul> <ol><li>生成秘钥</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 会在&lt;用户目录&gt;\.ssh目录下生成id_rsa和id_rsa.pub两个文件</span>
ssh-keygen -t rsa -C <span class="token string">&quot;你的邮箱地址&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>配置公钥</li></ol> <p>将id_rsa.pub里的内容拷贝到git网站里的<code>添加公钥</code>中。</p> <ol start="3"><li>验证</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 以码云为例，验证设置是否可以连接</span>
<span class="token function">ssh</span> -T git@gitee.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-2-常用操作指令"><a href="#_5-2-常用操作指令" class="header-anchor">#</a> 5.2 常用操作指令</h3> <hr> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 显示所有远程仓库</span>
<span class="token function">git</span> remote -v

<span class="token comment"># 显示某个远程仓库的信息</span>
<span class="token function">git</span> remote show <span class="token punctuation">[</span>remote<span class="token punctuation">]</span>

<span class="token comment"># 增加一个新的远程仓库，并命名</span>
<span class="token function">git</span> remote <span class="token function">add</span> <span class="token punctuation">[</span>shortname<span class="token punctuation">]</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span>

<span class="token comment"># 取回远程仓库的变化，并与本地分支合并</span>
<span class="token function">git</span> pull <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>

<span class="token comment"># 上传本地指定分支到远程仓库</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>

<span class="token comment"># 强行推送当前分支到远程仓库，即使有冲突</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> --force

<span class="token comment"># 推送所有分支到远程仓库</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> --all

<span class="token comment"># 简单查看远程---所有仓库</span>
<span class="token function">git</span> remote  （只能查看远程仓库的名字）

<span class="token comment"># 查看单个仓库</span>
<span class="token function">git</span>  remote show <span class="token punctuation">[</span>remote-branch-name<span class="token punctuation">]</span>

<span class="token comment"># 新建远程仓库</span>
<span class="token function">git</span> remote <span class="token function">add</span> <span class="token punctuation">[</span>branchname<span class="token punctuation">]</span>  <span class="token punctuation">[</span>url<span class="token punctuation">]</span>

<span class="token comment"># 修改远程仓库</span>
<span class="token function">git</span> remote <span class="token function">rename</span> <span class="token punctuation">[</span>oldname<span class="token punctuation">]</span> <span class="token punctuation">[</span>newname<span class="token punctuation">]</span>

<span class="token comment"># 删除远程仓库</span>
<span class="token function">git</span> remote <span class="token function">rm</span> <span class="token punctuation">[</span>remote-name<span class="token punctuation">]</span>

<span class="token comment"># 获取远程仓库数据</span>
<span class="token function">git</span> fetch <span class="token punctuation">[</span>remote-name<span class="token punctuation">]</span> <span class="token punctuation">(</span>获取仓库所有更新，但不自动合并当前分支<span class="token punctuation">)</span>
<span class="token function">git</span> pull <span class="token punctuation">(</span>获取仓库所有更新，并自动合并到当前分支<span class="token punctuation">)</span>

<span class="token comment"># 上传数据，如git push origin master</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote-name<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="_5-2-1-git-remote"><a href="#_5-2-1-git-remote" class="header-anchor">#</a> <strong>5.2.1 git remote</strong></h4> <blockquote><p>为了便于管理，Git要求每个远程主机都必须指定一个主机名。<code>git remote</code>命令就用于管理主机名。默认主机名为origin。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 不带选项的时候，git remote命令列出所有远程主机。</span>
<span class="token function">git</span> remote

<span class="token comment"># 使用-v选项，可以参看远程主机的网址。</span>
<span class="token function">git</span> remote -v

<span class="token comment"># 查看该主机的详细信息。</span>
<span class="token function">git</span> remote show <span class="token operator">&lt;</span>主机名<span class="token operator">&gt;</span>

<span class="token comment"># 添加远程主机。</span>
<span class="token function">git</span> remote <span class="token function">add</span> <span class="token operator">&lt;</span>主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>网址<span class="token operator">&gt;</span>

<span class="token comment"># 删除远程主机。</span>
<span class="token function">git</span> remote <span class="token function">rm</span> <span class="token operator">&lt;</span>主机名<span class="token operator">&gt;</span>

<span class="token comment"># 远程主机改名</span>
<span class="token function">git</span> remote <span class="token function">rename</span> <span class="token operator">&lt;</span>原主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>新主机名<span class="token operator">&gt;</span>

<span class="token comment"># 修改远程主机地址</span>
get remote set-url <span class="token punctuation">[</span>主机名<span class="token punctuation">]</span> <span class="token punctuation">[</span>地址<span class="token punctuation">]</span>

<span class="token comment"># 查看主机网址</span>
<span class="token function">git</span> remote get-url <span class="token punctuation">[</span>主机名<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_5-2-2-git-fetch"><a href="#_5-2-2-git-fetch" class="header-anchor">#</a> <strong>5.2.2 git fetch</strong></h4> <blockquote><p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到<code>git fetch</code>命令。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将远程主机的更新，全部取回本地</span>
<span class="token function">git</span> fetch <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span>

<span class="token comment"># 取回特定分支的更新</span>
<span class="token function">git</span> fetch <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>分支名<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>示例：</strong></p> <ol><li>取回<code>origin</code>主机的<code>master</code>分支。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> fetch origin master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>所取回的更新，在本地主机上要用&quot;远程主机名/分支名&quot;的形式读取。比如<code>origin</code>主机的<code>master</code>，就要用<code>origin/master</code>读取。</p> <ol start="2"><li>查看分支情况</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> branch -r
origin/master

<span class="token function">git</span> branch -a
* master
  remotes/origin/master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面命令表示，本地主机的当前分支是<code>master</code>，远程分支是<code>origin/master</code>。</p> <ol start="3"><li>取回远程主机的更新以后，可以在它的基础上，使用<code>git checkout</code>命令创建一个新的分支。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在origin/master的基础上，创建一个新分支</span>
<span class="token function">git</span> checkout -b newBrach origin/master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>本地分支上合并远程分支</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在当前分支上，合并origin/master</span>
<span class="token function">git</span> merge origin/master

<span class="token comment"># 在当前分支上，合并origin/master(变基)</span>
<span class="token function">git</span> rebase origin/master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_5-2-3-git-pull"><a href="#_5-2-3-git-pull" class="header-anchor">#</a> <strong>5.2.3 git pull</strong></h4> <blockquote><p>取回远程主机某个分支的更新，再与本地的指定分支合并。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 合并需要采用merge模式</span>
<span class="token function">git</span> pull <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>

<span class="token comment"># 合并需要采用rebase模式</span>
<span class="token function">git</span> pull --rebase <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>注</strong>：如果远程主机删除了某个分支，默认情况下，<code>git pull</code> 不会在拉取远程分支的时候，删除对应的本地分支。这是为了防止，由于其他人操作了远程主机，导致<code>git pull</code>不知不觉删除了本地分支。</p> <p>示例：**</p> <ol><li>取回<code>origin</code>主机的<code>next</code>分支，与本地的<code>master</code>分支合并，需要写成下面这样。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> pull origin next:master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>如果远程分支是与当前分支合并，则冒号后面的部分可以省略</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 取回origin/next分支，再与当前分支合并</span>
<span class="token function">git</span> pull origin next

<span class="token comment"># 等同于先做git fetch，再做git merge</span>
<span class="token function">git</span> fetch origin
<span class="token function">git</span> merge origin/next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>注</strong>：在某些场合，Git会自动在本地分支与远程分支之间，建立一种追踪关系（tracking）。比如，在<code>git clone</code>的时候，所有本地分支默认与远程主机的同名分支，建立追踪关系，也就是说，本地的<code>master</code>分支自动&quot;追踪&quot;<code>origin/master</code>分支。</p> <ol start="3"><li>手动建立追踪关系使用：</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> branch --set-upstream master origin/next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>如果当前分支与远程分支存在追踪关系，<code>git pull</code>就可以省略远程分支名。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 本地的当前分支自动与对应的origin主机&quot;追踪分支&quot;（remote-tracking branch）进行合并</span>
<span class="token function">git</span> pull origin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="5"><li>如果当前分支只有一个追踪分支，连远程主机名都可以省略。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 当前分支自动与唯一一个追踪分支进行合并</span>
<span class="token function">git</span> pull
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>原理：</strong></p> <p><img src="/assets/img/15fddc2b46c69d46.2a2c4236.gif" alt=""></p> <h4 id="_5-2-4-git-push"><a href="#_5-2-4-git-push" class="header-anchor">#</a> <strong>5.2.4 git push</strong></h4> <p><code>git push</code>命令用于将本地分支的更新，推送到远程主机。它的格式与<code>git pull</code>命令相仿。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> push <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意：</strong></p> <ul><li>分支推送顺序的写法是&lt;来源地&gt;:&lt;目的地&gt;，所以<code>git pull</code>是&lt;远程分支&gt;:&lt;本地分支&gt;，而<code>git push</code>是&lt;本地分支&gt;:&lt;远程分支&gt;。</li> <li>如果省略远程分支名，则表示将本地分支推送与之存在&quot;追踪关系&quot;的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</li> <li>在git的全局配置中，有一个push.default属性，其决定了git push操作的默认行为。push.default 有几个可选值：nothing, current, upstream, simple（默认）, matching
<ul><li>nothing - push操作无效，除非显式指定远程分支，例如git push origin develop</li> <li>current - push当前分支到远程同名分支，如果远程同名分支不存在则自动创建同名分支。</li> <li>upstream - push当前分支到它的upstream分支上（这一项其实用于经常从本地分支push/pull到同一远程仓库的情景，这种模式叫做central workflow）。</li> <li>simple（默认） - simple和upstream是相似的，只有一点不同，simple必须保证本地分支和它的远程
upstream分支同名，否则会拒绝push操作。只推送当前分支。</li> <li>matching - push所有本地和远程两端都存在的同名分支。推送所有有对应的远程分支的本地分支。</li></ul></li></ul> <p><strong>示例：</strong></p> <ol><li>将本地的<code>master</code>分支推送到<code>origin</code>主机的<code>master</code>分支。如果后者不存在，则会被新建。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> push origin master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 删除origin主机的master分支</span>
<span class="token function">git</span> push origin :master
<span class="token comment"># 等同于</span>
<span class="token function">git</span> push origin --delete master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将当前分支推送到origin主机的对应分支</span>
<span class="token function">git</span> push origin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>如果当前分支只有一个追踪分支，那么主机名都可以省略。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> push
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>如果当前分支与多个主机存在追踪关系，则可以使用<code>-u</code>选项指定一个默认主机，这样后面就可以不加任何参数使用<code>git push</code>。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将本地的master分支推送到origin主机，同时指定origin为默认主机，后面就可以不加任何参数使用git push了。</span>
<span class="token function">git</span> push -u origin master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="5"><li>不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<code>--all</code>选项。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将所有本地分支都推送到origin主机</span>
<span class="token function">git</span> push --all origin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="6"><li>如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做<code>git pull</code>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<code>--force</code>选项。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> push --force origin 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>**注：**使用<code>--force</code>选项，结果导致远程主机上更新的版本被覆盖。除非你很确定要这样做，否则应该尽量避免使用<code>--force</code>选项。</p> <ol start="7"><li><code>git push</code>不会推送标签（tag），除非使用<code>--tags</code>选项。</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> push origin --tags
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>原理解析：把 branch 上传到远端仓库</strong></p> <p>实质上，<code>push</code> 做的事是：把当前 <code>branch</code> 的位置（即它指向哪个 <code>commit</code>）上传到远端仓库，并把它的路径上的 <code>commit</code>s 一并上传。</p> <p>例如，现在的本地仓库有一个 <code>master</code> ，它超前了远程仓库两个提交；另外还有一个新建的 <code>branch</code> 叫 <code>feature1</code>，远程仓库还没有记载过它。具体大概像这样：</p> <p><img src="/assets/img/160071880ab72f00.21617346.gif" alt=""></p> <p>这时我执行 <code>git push</code>，就会把 <code>master</code> 的最新位置更新到远端，并且把它的路径上的 <code>5</code> <code>6</code> 两个 <code>commit</code>s 上传：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> push
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1600725e9973f71d.7a25210d.gif" alt=""></p> <p>而如果这时候我再切到 <code>feature1</code> 去后再执行一次 <code>push</code>，就会把 <code>feature1</code> 以及它的 <code>commit</code> <code>4</code> 上传到远程仓库：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> checkout feature1
<span class="token function">git</span> push origin feature1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/160073ccda56ef07.e6c292e3.gif" alt=""></p> <h2 id="六、标签-tag"><a href="#六、标签-tag" class="header-anchor">#</a> 六、标签 tag</h2> <p>tag是git版本库的一个标记，指向某个commit的指针。</p> <h4 id="_6-1-新建标签"><a href="#_6-1-新建标签" class="header-anchor">#</a> 6.1 新建标签</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在当前 commit 上创建标签</span>
<span class="token function">git</span> tag <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

<span class="token comment"># 创建带注释的标签,弹出编辑器输入注释</span>
<span class="token function">git</span> tag -a <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

<span class="token comment"># 指定提交节点创建分支</span>
<span class="token function">git</span> tag <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>commit<span class="token operator">&gt;</span> 

<span class="token comment"># 创建指定注释的标签</span>
<span class="token function">git</span> tag -a <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span> -m <span class="token string">'注释信息'</span>
<span class="token function">git</span> tag -a -m <span class="token string">'注释信息'</span> <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

<span class="token comment"># 创建带签名的标签</span>
<span class="token function">git</span> tag -s <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>
<span class="token function">git</span> tag -u <span class="token operator">&lt;</span>keyid<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

<span class="token comment"># 强制打标签(不管命名冲突)</span>
<span class="token function">git</span> tag <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span> -f


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_6-2-查看标签"><a href="#_6-2-查看标签" class="header-anchor">#</a> 6.2 查看标签</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看所有标签</span>
<span class="token function">git</span> tag

<span class="token function">git</span> tag -l

<span class="token function">git</span> tag -n

<span class="token comment"># 查看tag 指向commit 的修改信息</span>
<span class="token function">git</span> show <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>
<span class="token function">git</span> show <span class="token operator">&lt;</span>commit<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_6-3-删除tag"><a href="#_6-3-删除tag" class="header-anchor">#</a> 6.3 删除tag</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 删除本地tag</span>
<span class="token function">git</span> tag -d <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

<span class="token comment"># 删除远程tag</span>
<span class="token function">git</span> push origin --delete tag <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

<span class="token comment"># 删除本地和远程tag(通过推送空tag 到远程)</span>
<span class="token function">git</span> tag -d <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>
<span class="token function">git</span> push origin :refs/tags/<span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_6-4-远程tag"><a href="#_6-4-远程tag" class="header-anchor">#</a> 6.4 远程tag</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 推送tag 到远程</span>
<span class="token function">git</span> push --tags

<span class="token comment"># 推送指定的tag 到远程</span>
<span class="token function">git</span> push origin <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span> 

<span class="token comment"># 拉取远程tag</span>
<span class="token function">git</span> fetch origin tag <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tools/docker.html" class="prev">
        Docker 容器化镜像实例
      </a></span> <span class="next"><a href="/tools/iterm.html">
        iterm 终端工具
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9d8f3547.js" defer></script><script src="/assets/js/4.13bd7c28.js" defer></script><script src="/assets/js/2.e137e48c.js" defer></script><script src="/assets/js/3.ab6c8af4.js" defer></script>
  </body>
</html>
